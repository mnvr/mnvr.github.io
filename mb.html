<!DOCTYPE html>
<html lang="en">

<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width">

<title>Template | mnvr.in</title>
<meta name="description" content="">
<link href="paper.css" rel="stylesheet">

<style>
:root {
  --accent: pink;
}
canvas {
  border: 1px solid tomato;
  width: 100%;
  aspect-ratio: 2;
}
</style>

<script type="module">
/**
  Mandelbrot set

  Iterate, for each c,
  z = z^2 + c
  start z = 0

  [x, y]

  Complex multiplication / squaring:

  (a + ib) * (c + id)
  (a * c) + (ib * c) + (a * id) + (ib * id)
  (a * c) + (ib * c) + (a * id) - (b * d)
  (a * c - b * d) + i(b * c + a * d)
  (x * x - y * y) + i (2 * x * y)
*/
const step = ([x, y], [cx, cy]) => [x * x - y * y + cx, 2 * x * y + cy]
/** c is part of set if iteration converges  */
const mb = (c) => {
  let z = [0, 0]
  for (let i = 0; i < 100; i++) {
    z = step(z, c);
  }
  return z.every(x => x < 1)
}

const canvas = document.querySelector("canvas");
const output = document.querySelector("output");
const dpr = Math.max(Math.floor(devicePixelRatio), 2);
const width = canvas.width = canvas.clientWidth * dpr;
const height = canvas.height = canvas.clientHeight * dpr;
output.innerText = JSON.stringify([canvas.clientWidth, canvas.clientHeight, canvas.width, canvas.clientWidth]);

const ctx = canvas.getContext("2d");
ctx.strokeStyle = "tomato";
ctx.beginPath();
ctx.moveTo(0, 0);
ctx.lineTo(width - 20, height - 20);
ctx.closePath();
ctx.stroke();

</script>

</head>

<body>

<p>
<canvas></canvas>
</p>
<p>
<output></output>
</p>

</body>
</html>
