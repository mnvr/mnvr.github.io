<!DOCTYPE html>
<html lang="en">

<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width">

<title>fm | mnvr.in</title>
<meta name="description" content="">

<style>
</style>

<script type="module">
let audioContext;
let isOn;

const onOff = (e) => {
  const btn = e.target;

  if (!audioContext) {
    audioContext = new AudioContext();
    createAudioGraph();
  }

  isOn = !isOn;
  btn.innerText = isOn ? "Off" : "On";

  if (isOn) {
    audioContext.resume();
  } else {
    audioContext.suspend();
  }
}

const createAudioGraph = () => {
  const osc1 = new OscillatorNode(audioContext, {

  });
  const amp1 = new GainNode(audioContext);
  osc1.connect(amp1)
  osc1.start();

  const mix = new GainNode(audioContext, { gain: 0.1 });
  amp1.connect(mix);

  mix.connect(audioContext.destination);
}

document.querySelector("button").addEventListener("click", onOff);
</script>

</head>

<body>

<button>On</button>

</body>
</html>
